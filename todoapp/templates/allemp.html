{% extends 'header.html' %}
{% load static %}
{% block 'content' %}

<div class="container">

    <div class="row">
        <div>
            <div style="display: flex; gap: 12px; align-items: center; margin-top: 10px;">
                <div>
                    <strong>Add More Employee</strong>
                    <a href="../create-employee" class="btn btn-success">Add More</a>
                </div>|
                <div>
                    <strong>Search Employee:</strong>
                    <input type="search" id="searchInput" onkeyup="searchTable()" placeholder="Search employee"
                        class="form-control" style="width: 200px; display: inline;">
                    <div>
                        <strong> To the Task to Employee : </strong> <span><a href="../managertouser"
                                class='btn btn-warning'> Do The Task </a></span>
                    </div>
                    <div class="float-end">
                        <strong>Total Employee : </strong><span>{{empcount}}</span>
                    </div>
                </div>|
            </div>

        </div>
        <div class="col-lg-0 col "></div>
        <div class="col-lg-12 col-sm-12 col-md-12 table-responsive-md">
            <table id="dataTable" class="table table-striped table-responsive-md ">
                <thead>
                    <tr>
                        <th class="d-none d-md-table-cell">Manager id</th>
                        <th>Employee_Id</th>
                        <th> Employee_Name</th>
                        <th>Phone_Number</th>
                        <th>Id_Card</th>
                        <th>Card_number</th>
                        <th> Joining_date </th>
                        <th>Action</th>
                    </tr>
                </thead>
                <tbody>
                    {% for e in allemp %}
                    <tr class="">
                        <td class="d-none d-md-table-cell">{{e.manager_id}}</td>
                        <td>{{e.employee_id}}</td>
                        <td>{{e.employee_name}}</td>
                        <td>{{e.phone_number}}</td>
                        <td>{{e.employee_id_card}}</td>
                        <td>{{e.card}}</td>
                        <td>{{e.employee_joining_date}}</td>
                        <td>
                            <a href="../delete-employee/{{e.id}}" title="Delete Employee"
                                onclick="return confirm('Are sure to delete employee, if you do this the employee user account will also be deleted')"
                                id="user-delete{{e.id}}"><i class="fas fa-trash btn btn-danger text-dark"></i></a>

                            <a href="../update-employee/{{e.employee_id}}" title="Edit Employee datails"><i
                                    class="fas fa-pen btn btn-success text-dark"></i></a>

                            <a href="../managertouser/{{e.employee_id}}" title="Do the task of this emplomyee">
                                <l class="fas fa-book btn btn-warning text-dark"></l>
                            </a>
                        </td>
                    </tr>

                    {% comment %}
                    <script>
                        $(function () {
                            $('#user-delete{{e.id}}').click(function () {
                                var empd_id = '{{e.employee_id}}'
                                $.ajax({
                                    url: '../delete-employee',
                                    type: 'POST',
                                    data: { 'empd_id': empd_id },
                                    success: function (res) {
                                        alert(res)
                                    }
                                })
                            })
                        })
                    </script> {% endcomment %}
                    {% endfor %}
                </tbody>
            </table>
        </div>
        <div class="col-lg-0 col"></div>
    </div>
</div>



{% endblock %}